{"version":3,"sources":["meteor://ðŸ’»app/server/publish.js"],"names":[],"mappings":"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","file":"/server/publish.js","sourcesContent":["  /****************************************************************\\\n  |  Publish data from MongoDB to an authorized suscription (lib)  |\n  \\****************************************************************/\n  \n   \t\n  /*******************\n  * PROFILER SYSTEM *\n  *******************/\n    \n    /*\n\t *\tPublish informations of users\n\t */\n\tMeteor.publish('user', function(currentUser, userId, form){\n      //Admin can see every users\n      if(currentUser && currentUser.username === \"admin\") {\n        if(userId) {\n          return user.find({_id:userId}); \n        } else {\n          return user.find(); \n        }\n      } else {\n        if(form) {\n            return user.find();\n        } else {\n            return user.find({_id:userId}); \n        }\n      }\n\t});\n\n\tMeteor.publish('correction_profile_picture', function(){\n\t\t  //every correction profiles in DB\n\t  \treturn correction_profile_picture.find(); \n\t});\n  \n\tMeteor.publish('correction_profile_result', function(){\n\t\t  //every correction profiles in DB\n\t  \treturn correction_profile_result.find(); \n\t});\n  \n\tMeteor.publish('filter', function(){\n\t\t  //every filters in DB\n\t  \treturn filter.find();\n\t});\n\n\tMeteor.publish('picture', function(){\n\t\t  //every pictures in DB\n\t  \treturn picture.find();\n\t});\n  \n\tMeteor.publish('target', function(){\n\t\t  //every target in DB\n\t  \treturn target.find();\n\t});\n\n  \n  /***************\n  * ADMIN PANEL *\n  ***************/\n  \n  //publish of survey\n  Meteor.publish('survey', function(currentUser){\n      //Admin can see every surveys\n      if(currentUser && currentUser.username === \"admin\") {\n        return survey.find(); \n      } else {\n        return survey.find({ state : true }); \n      }\n  });\n  \n  //publish of module_survey\n  Meteor.publish('module_survey', function(){\n\t    return module_survey.find();\n  });\n  \n  //publish of picture_admin\n  Meteor.publish('picture_admin', function(){\n\t    return picture_admin.find();\n  });\n  \n  //publish of picture_admin\n  Meteor.publish('instruction', function(){\n\t    return instruction.find();\n  });\n  \n  //publish of info_txt\n  Meteor.publish('info_txt', function(){\n\t    return info_txt.find();\n  });\n  \n  //publish of sorted_color_admin\n  Meteor.publish('sorted_color_admin', function(){\n\t    return sorted_color_admin.find();\n  });\n  \n  //publish of filter_admin\n  Meteor.publish('filter_admin', function(){\n\t    return filter_admin.find();\n  });\n  \n  //publish of field_form\n  Meteor.publish('field_form', function(){\n\t    return field_form.find();\n  });\n  \n  \n  //publish of admin\n  Meteor.publish(\"admin\", function() {\n      return Meteor.users.find({}, {username: \"admin\"});\n  });   \n  \n  \n  /* publish uploaded pictures */\n  Meteor.publish(\"picture_upload\", function(){\n      return picture_upload.find();\n  });"]}