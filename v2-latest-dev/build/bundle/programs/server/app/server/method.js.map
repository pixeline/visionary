{"version":3,"sources":["meteor://ðŸ’»app/server/method.js"],"names":[],"mappings":";;;;;;;;;AACA,MAAM,CAAC,OAAO,CAAC;;AAEX,wBAAoB,EAAE,UAAS,IAAI,EAAE,mBAAmB,EAAE,oBAAoB,EAAC;;AAE3E,aAAK,CAAC,IAAI,EAAE;AACX,gBAAI,EAAG,MAAM;AACb,qBAAS,EAAE,MAAM;AACjB,iBAAK,EAAE,MAAM;AACb,eAAG,EAAE,MAAM;AACX,eAAG,EAAE,OAAO,EACZ,CAAC,CAAC;;;AAEH,YAAI,GAAG,CAAC,CAAC,MAAM,CAAC,IAAI,EAAE;AAClB,qBAAS,EAAE,IAAI,IAAI,EAAE;SACxB,CAAC,CAAC;;AAEH,YAAI,OAAO,GAAG,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;;;AAGhC,aAAI,CAAC,GAAG,CAAC,EAAG,CAAC,GAAG,mBAAmB,CAAC,MAAM,EAAG,CAAC,EAAE,EAAE;AACpD,iBAAK,CAAC,mBAAmB,CAAC,CAAC,CAAC,EAAE;AACvB,oBAAI,EAAG,MAAM;AACV,sBAAM,EAAG,OAAO;aACnB,CAAC,CAAC;;AAEH,+BAAmB,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC,mBAAmB,CAAC,CAAC,CAAC,EAAE;AACzD,uBAAO,EAAE,OAAO;aAChB,CAAC,CAAC;;AAEH,gBAAI,qBAAqB,GAAG,kBAAkB,CAAC,MAAM,CAAC,mBAAmB,CAAC,CAAC,CAAC,CAAC,CAAC;;;AAG9E,iBAAI,CAAC,GAAG,CAAC,EAAG,CAAC,GAAG,oBAAoB,CAAC,CAAC,CAAC,CAAC,MAAM,EAAG,CAAC,EAAE,EAAE;AACrD,qBAAK,CAAC,oBAAoB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;AACjC,6BAAS,EAAG,MAAM;AAClB,yBAAK,EAAE,MAAM;iBACb,CAAC,CAAC;;AAEH,oCAAoB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC,oBAAoB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;AACjE,yCAAqB,EAAE,qBAAqB;iBAC5C,CAAC,CAAC;;AAET,+BAAe,CAAC,MAAM,CAAC,oBAAoB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;aAC7C;SACJ;;AAED,eAAO;AACH,eAAG,EAAE,OAAO;SACf,CAAC;KACL;CACJ,CAAC,CAAC,sE","file":"/server/method.js","sourcesContent":["//Insert, Update, Delete in MongoDB\nMeteor.methods({\n\t/* Insert Data of User and his Correction Profiles */ \n    insertUserCorrection: function(user, correction_profiles, tab_adaptation_rules){ \n    \t//Check server-side\n        check(user, {\n        \tname : String,\n        \tfirstname: String,\n        \temail: String, \n        \tage: Number,\n        \tsex: Boolean, //true if Male, false if Female\n        });\n        //extend the collection to add some information\n        user = _.extend(user, {\n            createdAt: new Date()\n        });\n        //Insert User Data and return user_id, useful for the link with his correction profile\n        var user_id = User.insert(user);\n\n        /* Loop for each correction profile */\n        for(i = 0 ; i < correction_profiles.length ; i++) {\n    \t\tcheck(correction_profiles[i], {\n            \ttype : String,\n                isBest : Boolean\n            });\n            //extend the collection to add foreign key\n            correction_profiles[i] = _.extend(correction_profiles[i], {\n            \tuser_id: user_id\n            });\n            //Insert each user's Correction profile and return the id for the link with each of the adaptation rules\n            var correction_profile_id = Correction_profile.insert(correction_profiles[i]);\n\n            /* Loop for each adaptation rule (teinte, saturation...) of the current correction profile */\n            for(j = 0 ; j < tab_adaptation_rules[i].length ; j++) {\n            \tcheck(tab_adaptation_rules[i][j], {\n    \t        \tparameter : String,\n    \t        \tvalue: Number\n    \t        });\n                //extend the collection to add foreign key\n            \ttab_adaptation_rules[i][j] = _.extend(tab_adaptation_rules[i][j], {\n    \t        \tcorrection_profile_id: correction_profile_id\n    \t        });\n    \t        //Insert each adaptation rule\n    \t\t\tAdaptation_rule.insert(tab_adaptation_rules[i][j]);\n            }\n        }\n\n        return {\n            _id: user_id\n        };\n    }\n});"]}